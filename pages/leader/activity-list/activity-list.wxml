<view class="container">
  <view class="header-bar">
    <view class="search-bar">
      <input class="search-input" placeholder="æœç´¢æ´»åŠ¨æ ‡é¢˜" value="{{searchParams.title}}" bindinput="onSearchInput" />
      <button class="search-btn" bindtap="onSearch">æœç´¢</button>
    </view>
    <view class="actions">
      <button class="toggle-btn" bindtap="toggleSelfOnly">
        <text>{{showSelfOnly ? 'æŸ¥çœ‹å…¨éƒ¨' : 'åªçœ‹æˆ‘çš„'}}</text>
      </button>
      <button class="create-btn" bindtap="createActivity">+ åˆ›å»ºæ´»åŠ¨</button>
    </view>
  </view>
  <scroll-view class="activity-list" scroll-y refresher-enabled refresher-triggered="{{refreshing}}" bindrefresherrefresh="onPullDownRefresh">
    <view class="activity-item" wx:for="{{activityList}}" wx:key="id" bindtap="viewActivityDetail" data-id="{{item.id}}">
      <view class="activity-header">
        <text class="activity-title">{{item.title}}</text>
        <text class="status-badge {{getStatusClass(item.status)}}">{{getStatusText(item.status)}}</text>
      </view>
      <text class="activity-desc">{{item.description}}</text>
      <view class="activity-info">
        <text class="info-item">ğŸ“ {{item.location || 'æœªè®¾ç½®'}}</text>
        <text class="info-item">â° {{formatTime(item.startTime) || 'æœªè®¾ç½®'}}</text>
        <text class="info-item">ğŸ‘¥ {{item.currentPeople || 0}}/{{item.requiredPeople || 0}}</text>
      </view>
      <view class="activity-footer">
        <text class="deadline">æˆªæ­¢ï¼š{{formatTime(item.signupDeadline) || 'æœªè®¾ç½®'}}</text>
      </view>
      <view class="item-actions">
        <button class="outline-btn" size="mini" data-id="{{item.id}}" catchtap="viewActivityDetail">è¯¦æƒ…</button>
        <button class="primary-btn" size="mini" data-id="{{item.id}}" data-leaderid="{{item.leaderId}}" catchtap="viewSignupList">æŠ¥åå®¡æ ¸</button>
      </view>
    </view>
    <view class="load-more" wx:if="{{loading}}">åŠ è½½ä¸­...</view>
    <view class="no-more" wx:if="{{!hasMore && activityList.length > 0}}">æ²¡æœ‰æ›´å¤šäº†</view>
    <view class="empty" wx:if="{{!loading && activityList.length === 0}}">æš‚æ— æ´»åŠ¨</view>
  </scroll-view>
</view>

