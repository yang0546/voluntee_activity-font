<view class="page">
  <view class="form-card">
    <view class="form-head">
      <text class="title">编辑活动</text>
      <text class="sub">完善时间、人数和负责人信息</text>
    </view>

    <view class="form-item">
      <text class="label">活动标题 *</text>
      <input class="input" placeholder="请输入活动标题" value="{{form.title}}" data-field="title" bindinput="onInputChange" />
    </view>

    <view class="form-item">
      <text class="label">活动说明 *</text>
      <textarea class="textarea" placeholder="请输入活动说明" value="{{form.description}}" data-field="description" bindinput="onInputChange" />
    </view>

    <view class="form-item">
      <text class="label">活动地点 *</text>
      <input class="input" placeholder="请输入活动地点" value="{{form.location}}" data-field="location" bindinput="onInputChange" />
    </view>

    <view class="form-row">
      <view class="form-item half">
        <text class="label">负责人 *</text>
        <picker mode="selector" range="{{leaderList}}" range-key="name" value="{{leaderIndex}}" bindchange="onLeaderChange">
          <view class="picker-view">{{leaderList.length > 0 && leaderList[leaderIndex] ? leaderList[leaderIndex].name : '请选择负责人'}}</view>
        </picker>
      </view>
      <view class="form-item half">
        <text class="label">活动状态</text>
        <picker mode="selector" range="{{statusOptions}}" range-key="label" value="{{statusIndex}}" bindchange="onStatusChange">
          <view class="picker-view">{{statusOptions[statusIndex].label}}</view>
        </picker>
      </view>
    </view>

    <view class="form-row">
      <view class="form-item half">
        <text class="label">开始日期 *</text>
        <picker mode="date" value="{{startDate}}" data-field="startTime" bindchange="onDateChange">
          <view class="picker-view">{{startDate || '请选择日期'}}</view>
        </picker>
      </view>
      <view class="form-item half">
        <text class="label">开始时间 *</text>
        <picker mode="time" value="{{startTime}}" data-field="startTime" bindchange="onTimeChange">
          <view class="picker-view">{{startTime || '请选择时间'}}</view>
        </picker>
      </view>
    </view>

    <view class="form-row">
      <view class="form-item half">
        <text class="label">结束日期 *</text>
        <picker mode="date" value="{{endDate}}" data-field="endTime" bindchange="onDateChange">
          <view class="picker-view">{{endDate || '请选择日期'}}</view>
        </picker>
      </view>
      <view class="form-item half">
        <text class="label">结束时间 *</text>
        <picker mode="time" value="{{endTime}}" data-field="endTime" bindchange="onTimeChange">
          <view class="picker-view">{{endTime || '请选择时间'}}</view>
        </picker>
      </view>
    </view>

    <view class="form-row">
      <view class="form-item half">
        <text class="label">报名截止日期 *</text>
        <picker mode="date" value="{{deadlineDate}}" data-field="signupDeadline" bindchange="onDateChange">
          <view class="picker-view">{{deadlineDate || '请选择日期'}}</view>
        </picker>
      </view>
      <view class="form-item half">
        <text class="label">报名截止时间 *</text>
        <picker mode="time" value="{{deadlineTime}}" data-field="signupDeadline" bindchange="onTimeChange">
          <view class="picker-view">{{deadlineTime || '请选择时间'}}</view>
        </picker>
      </view>
    </view>

    <view class="form-row">
      <view class="form-item half">
        <text class="label">所需人数 *</text>
        <input class="input" type="number" placeholder="请输入所需志愿者人数" value="{{form.requiredPeople}}" data-field="requiredPeople" bindinput="onInputChange" />
      </view>
      <view class="form-item half">
        <text class="label">当前人数</text>
        <input class="input" type="number" placeholder="当前已加入人数" value="{{form.currentPeople !== '' && form.currentPeople !== null && form.currentPeople !== undefined ? form.currentPeople : '0'}}" data-field="currentPeople" bindinput="onInputChange" />
      </view>
    </view>

    <view class="actions">
      <button class="primary-btn" bindtap="handleSubmit" disabled="{{loading}}">保存修改</button>
    </view>
  </view>
</view>
