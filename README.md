# 志愿者活动管理系统小程序

基于微信小程序开发的志愿者活动管理系统，支持志愿者、活动负责人和管理员三种角色。

## 功能特性

### 志愿者功能

- 浏览活动列表（支持搜索和状态筛选）
- 查看活动详情
- 报名参加活动
- 查看分配给自己的任务
- 更新任务状态（未开始/进行中/已完成）

### 活动负责人功能

- 创建志愿活动
- 查看活动列表（全部/我的活动）
- 编辑和删除活动
- 审核志愿者报名申请（通过/拒绝）
- 为志愿者分配任务
- 查看任务列表

### 管理员功能

- 用户管理（查看、编辑用户信息、修改角色）
- 活动管理（查看、编辑所有活动）
- 支持按姓名、学院、角色筛选用户
- 支持按标题、状态筛选活动

## 技术栈

- 微信小程序原生框架
- JWT Token 认证
- RESTful API 接口

## 项目结构

```
volunteerfront/
├── app.js                 # 小程序入口文件
├── app.json              # 小程序配置文件
├── app.wxss              # 全局样式
├── utils/
│   ├── api.js            # API接口封装
│   ├── request.js        # 请求工具封装
│   └── util.js           # 工具函数
├── pages/
│   ├── login/            # 登录页面
│   ├── volunteer/        # 志愿者相关页面
│   │   ├── activity-list/    # 活动列表
│   │   ├── activity-detail/  # 活动详情
│   │   └── task-list/        # 任务列表
│   ├── leader/           # 负责人相关页面
│   │   ├── activity-list/    # 活动列表
│   │   ├── activity-create/  # 创建活动
│   │   ├── activity-detail/  # 活动详情
│   │   ├── activity-edit/    # 编辑活动
│   │   ├── signup-list/      # 报名审核
│   │   └── task-list/        # 任务管理
│   └── admin/            # 管理员相关页面
│       ├── user-list/        # 用户列表
│       ├── user-edit/        # 编辑用户
│       ├── activity-list/    # 活动列表
│       └── activity-edit/    # 编辑活动
└── API接口文档.md        # API接口文档
```

## 配置说明

### 1. 修改 API 基础地址

在 `utils/request.js` 中修改 `BASE_URL`：

```javascript
const BASE_URL = "http://localhost:8080"; // 修改为你的后端服务地址
```

### 2. 小程序配置

确保 `app.json` 中的页面路径配置正确，小程序会自动根据用户角色跳转到对应页面。

## 使用说明

### 登录流程

1. 首次打开小程序会跳转到登录页面
2. 用户需要选择头像和输入昵称
3. 点击登录按钮，系统会调用微信登录接口获取 code
4. 将 code 和用户信息发送到后端进行登录
5. 登录成功后，根据用户角色自动跳转到对应页面

### 角色说明

- **志愿者（role: 0）**：可以浏览活动、报名参加、查看和更新任务
- **负责人（role: 1）**：可以创建活动、审核报名、分配任务
- **管理员（role: 2）**：可以管理用户和活动

### 页面跳转逻辑

- 登录成功后，根据用户角色自动跳转：
  - 志愿者 → `/pages/volunteer/activity-list/activity-list`
  - 负责人 → `/pages/leader/activity-list/activity-list`
  - 管理员 → `/pages/admin/user-list/user-list`

## API 接口

所有 API 接口文档请参考 `API接口文档.md`。

### 主要接口

- **登录接口**: `POST /common/login`
- **志愿者接口**: `/volunteer/*`
- **负责人接口**: `/leader/*`
- **管理员接口**: `/admin/*`

### 认证方式

除登录接口外，所有接口都需要在请求头中携带 JWT Token：

```
token: {token}
```

Token 会自动从本地存储中读取并添加到请求头中。

## 开发注意事项

1. **时间格式**：所有时间字段统一使用格式 `yyyy-MM-dd HH:mm:ss`，小程序中使用 picker 组件选择日期和时间后会自动组合。

2. **分页加载**：列表页面支持下拉刷新和上拉加载更多，默认每页 10 条数据。

3. **错误处理**：所有 API 请求都有统一的错误处理，失败时会显示错误提示。

4. **本地存储**：登录信息（token、role、userProfile）会保存在本地存储中，下次打开小程序会自动检查登录状态。

5. **角色权限**：页面跳转和功能展示会根据用户角色进行控制。

## 待完善功能

1. 任务分配时选择已通过审核的用户列表（目前需要手动输入用户 ID）
2. 志愿者查看自己的报名状态
3. 活动详情页面显示已报名用户列表
4. 消息通知功能
5. 数据统计和报表功能

## 许可证

MIT License
