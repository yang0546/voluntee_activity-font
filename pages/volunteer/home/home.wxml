<view class="page home-page">
  <view class="card hero">
    <view class="hero-header">
      <view class="hello">ä½ å¥½ï¼Œ{{profile.name || 'å¿—æ„¿è€…'}}</view>
      <view class="subtitle">æ„Ÿè°¢ä½ æŒç»­çš„å¿—æ„¿æœåŠ¡</view>
    </view>
    <view class="hero-stats">
      <view class="stat">
        <view class="stat-value">{{signupSummary.approved}}</view>
        <view class="stat-label">å·²é€šè¿‡æŠ¥å</view>
      </view>
      <view class="stat">
        <view class="stat-value">{{signupSummary.pending}}</view>
        <view class="stat-label">å¾…å®¡æ ¸</view>
      </view>
      <view class="stat">
        <view class="stat-value">{{signupSummary.total}}</view>
        <view class="stat-label">ç´¯è®¡æŠ¥å</view>
      </view>
    </view>
    <view class="hero-actions">
      <button class="btn-primary" size="mini" bindtap="goSquare">å»æ´»åŠ¨å¹¿åœº</button>
      <button class="btn-ghost" size="mini" bindtap="goProfile">ä¸ªäººä¸­å¿ƒ</button>
    </view>
  </view>

  <view class="card quick-actions">
    <view class="section-title">å¿«æ·å…¥å£</view>
      <view class="action-grid">
        <view class="action-item" bindtap="goSquare">
          <view class="action-icon">ğŸŒŸ</view>
          <view class="action-text">æ´»åŠ¨å¹¿åœº</view>
        </view>
        <view class="action-item" bindtap="goRecords">
          <view class="action-icon">ğŸ“</view>
          <view class="action-text">æˆ‘çš„æŠ¥å</view>
        </view>
        <view class="action-item" bindtap="goMyActivities">
          <view wx:if="{{pendingTaskCount > 0}}" class="corner-dot">
            {{pendingTaskCount > 99 ? '99+' : pendingTaskCount}}
          </view>
          <view class="action-icon">âœ…</view>
          <view class="action-text">æˆ‘çš„æ´»åŠ¨</view>
        </view>
      </view>
    </view>

  <view class="card section">
    <view class="section-title">
      <view>æŠ¥åè¿›åº¦</view>
      <text class="link" bindtap="goRecords">å…¨éƒ¨</text>
    </view>
    <block wx:if="{{mySignups.length}}">
      <view wx:for="{{mySignups}}" wx:key="id" class="signup-item" data-id="{{item.activityId}}" bindtap="goActivityDetail">
        <view class="signup-left">
          <view class="signup-title">{{item.activityTitle}}</view>
          <view class="signup-meta">{{item.createTime || 'â€”'}}</view>
        </view>
        <view class="signup-status {{item.statusClass}}">{{item.statusText}}</view>
      </view>
    </block>
    <view wx:else class="empty">æš‚æ— æŠ¥åï¼Œå»æ´»åŠ¨å¹¿åœºçœ‹çœ‹å§</view>
  </view>

  <view class="card section">
    <view class="section-title">
      <view>çƒ­é—¨æ´»åŠ¨</view>
      <text class="link" bindtap="goSquare">æ›´å¤š</text>
    </view>
    <block wx:if="{{highlightActivities.length}}">
      <view wx:for="{{highlightActivities}}" wx:key="id" class="activity-highlight" data-id="{{item.id}}" data-activity="{{item.serialized}}" bindtap="goActivityDetail">
        <view class="highlight-row">
          <view class="highlight-title">{{item.title}}</view>
          <view class="tag {{item.statusClass}}">{{item.statusText}}</view>
        </view>
        <view class="highlight-meta">
          <text>{{item.location}}</text>
          <text class="dot">â€¢</text>
          <text>{{item.timeRange}}</text>
        </view>
        <view class="progress">
          <view class="progress-bar" style="width: {{item.progress}}%;"></view>
        </view>
        <view class="progress-text">å·²æŠ¥å {{item.currentPeople}} / {{item.requiredPeople}}</view>
      </view>
    </block>
    <view wx:else class="empty">æš‚æ— æ´»åŠ¨ï¼Œç¨åå†æ¥çœ‹</view>
  </view>
</view>
